<%= import_component("videos-top-panel") %>
<%= import_component("library-view") %>

<template id="videos">
  <videos-top-panel :visible.sync="visible"></videos-top-panel>
  <library-view :metadata="visible" v-ref:library></library-view>
</template>

<videos></videos>

<script>
  Vue.component('videos', {
    template: '#videos',
    data: function() {
      return {
        visible: []
      };
    },
    events: {
      refreshed: function() {
        this.$refs.library.refresh();
      },
      reload: function() {
        this.$refs.library.refresh();
        console.log('reloaded');
      },
      search: function(query) {
        this.$refs.library.query(query);
      },
      'play-request': function(video) {
        window.location.pathname = "/watch/" + video.id
      }
    }
  });
</script>
