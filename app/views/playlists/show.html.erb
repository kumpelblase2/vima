<%= import_component("metadata") %>
<%= import_component("playlists-top-panel") %>
<%= import_component("playlist-view") %>

<template id="playlist">
  <metadata @metadata="updateMetadata"></metadata>
  <playlists-top-panel :metadata="metadata" :visible="visible" @visible-changed="updateVisibleMetadata"></playlists-top-panel>
  <playlist-view :metadata="visible" playlist="<%= params[:id] %>"></playlist-view>
</template>

<playlist></playlist>

<script>
    Vue.component('playlist', {
        template: '#playlist',
        data: function() {
            return {
                metadata: [],
                visible: []
            };
        },
        methods: {
            updateMetadata: function(data) {
                this.metadata = data;
            },
            updateVisibleMetadata: function(data) {
                this.visible = data;
            }
        },
        events: {
            'play-request': function(video) {
                window.location.pathname = "/watch/" + video.id
            },
            'playlist-delete': function () {

            }
        }
    });
</script>
