<link rel="import" href="<%= asset_path('video-list.html') %>">

<template id="playlist-view">
  <video-list :videos="videos" :metadata="metadata"></video-list>
</template>

<script>
    Vue.component('playlist-view', {
        template: document.currentScript.ownerDocument.querySelector("#playlist-view").innerHTML,
        props: {
            metadata: Array,
            playlist: String
        },
        data: function() {
            return {
                videos: []
            };
        },
        methods: {
            load: function() {
                $.ajax({
                    url: '/playlists/' + this.playlist + '/videos',
                    success: (response) => {
                        this.videos = response;
                    }
                });
            }
        },
        ready: function() {
            this.load();
        }
    });
</script>